<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Why I threw out my dotfiles - davegallant</title><link rel="icon" type="image/png" href=https://davegallant.ca/favicon.ico /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="" />
	<meta property="og:image" content=""/>
	<meta property="og:title" content="Why I threw out my dotfiles" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/2021/09/08/why-i-threw-out-my-dotfiles/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-09-08T00:42:33-04:00" />
<meta property="article:modified_time" content="2021-09-08T00:42:33-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Why I threw out my dotfiles"/>
<meta name="twitter:description" content=""/>
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
	<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">

	
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.3547bd7f78e8240e2e642eaae27e96ba31dec26821aff923eb7ffc098ac3aaee.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="/css/dark.c0351bf49d41b33a222e1a32cc0387e850b010f77ab2d79a9d39c72c03afcfdb.css"  disabled />
	

	
	
		<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
		</script>
	
		
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script>
	

	
	
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css">
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js"></script>
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
		
		
		<script>
			document.addEventListener("DOMContentLoaded", function() {
					renderMathInElement(document.body, {
							delimiters: [
									{left: "$$", right: "$$", display: true},
									{left: "$", right: "$", display: false}
							]
					});
			});
			</script>
	
	
	
		
		
		<link rel="stylesheet" type="text/css" href="/css/custom.d96bfb9e3314a7699144ab6ae7331d424cbd7fb34a2e890b17e7bb7db4e30f3a.css">
		
</head>
<body>
        <div class="content"><header>
  <div class="main">
    <a href="/">davegallant</a>
  </div>
  <nav>
    
    <a href="/">Posts</a>
    
    <a href="/about">About</a>
    
    <a href="/index.xml">RSS</a>
     </nav>
  <script
    type="text/javascript"
    src="https://storage.ko-fi.com/cdn/widget/Widget_2.js"
  ></script>
  <span id="dark-mode-toggle" onclick="toggleTheme()"></span>
  <script src="/js/themetoggle.js"></script>
  
  

    
    <link href="/css/copy-code-button.min.css" rel="stylesheet">


</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Why I threw out my dotfiles</h1>
			
			<div class="meta">Posted on Sep 8, 2021</div>
			
		</div>
		

		<section class="body"><p>Over the years I have collected a number of dotfiles that I have shared across both Linux and macOS machines (<code>~/.zshrc</code>, <code>~/.config/git/config</code>, <code>~/.config/tmux/tmux.conf</code>, etc). I have tried several different ways to manage them, including <a href="https://www.atlassian.com/git/tutorials/dotfiles">bare git repos</a> and utilities such as <a href="https://www.gnu.org/software/stow/">GNU Stow</a>. These solutions work well enough, but I have since found what I would consider a much better solution for organizing user configuration: <a href="https://github.com/nix-community/home-manager">home-manager</a>.</p>
<h2 id="what-is-home-manager">What is home-manager?<a href="#what-is-home-manager" class="hanchor" ariaLabel="Anchor">#</a></h2>
<p>Before understanding home-manager, it is worth briefly discussing what nix is. <a href="https://nixos.org/">nix</a> is a package manager that originally spawned from a <a href="https://edolstra.github.io/pubs/phd-thesis.pdf">PhD thesis</a>. Unlike other package managers, it uses symbolic links to keep track of the currently installed packages, keeping around the old ones in case you may want to rollback.</p>
<p>For example, I have used nix to install the package <a href="https://search.nixos.org/packages?channel=unstable&amp;show=bind&amp;from=0&amp;size=50&amp;sort=relevance&amp;type=packages&amp;query=bind">bind</a> which includes <code>dig</code>. You can see that it is available on multiple platforms. The absolute path of <code>dig</code> can be found by running:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#4c566a;font-weight:bold">$</span> ls -lh <span style="color:#81a1c1;font-weight:bold">$(</span>which dig<span style="color:#81a1c1;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>lrwxr-xr-x 73 root 31 Dec  1969 /run/current-system/sw/bin/dig -&gt; /nix/store/0r4qdyprljd3dki57jn6c6a8dh2rbg9g-bind-9.16.16-dnsutils/bin/dig
</span></span></code></pre></div><p>Notice that there is a hash included in the file path? This is a nix store path and is computed by the nix package manager. This <a href="https://nixos.org/guides/nix-pills/nix-store-paths.html">nix pill</a> does a good job explaining how this hash is computed. All of the nix pills are worth a read, if you are interested in learning more about nix itself. However, using home-manager does not require extensive knowledge of nix.</p>
<p>Part of the nix ecosystem includes <a href="https://github.com/NixOS/nixpkgs">nixpkgs</a>. Many popular tools can be found already packaged in this repository. As you can see with these <a href="https://repology.org/repositories/statistics/total">stats</a>, there is a large number of existing packages that are being maintained by the community. Contributing a new package is easy, and anyone can do it!</p>
<p>home-manager leverages the nix package manager (and nixpkgs), as well the nix language so that you can declaratively define your system configuration. I store my <a href="https://github.com/davegallant/nix-config">nix-config</a> in git so that I can keep track of my packages and configurations, and retain a clean and informative git commit history so that I can understand what changed and why.</p>
<h2 id="setting-up-home-manager">Setting up home-manager<a href="#setting-up-home-manager" class="hanchor" ariaLabel="Anchor">#</a></h2>
<blockquote>
<p>⚠️ If you run this on your main machine, make sure you backup your configuration files first. home-manager is pretty good about not overwriting existing configuration, but it is better to have a backup! Alternatively, you could test this out on a VM or cloud instance.</p>
</blockquote>
<p>The first thing you should do is <a href="https://nixos.org/guides/install-nix.html">install nix</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -L https://nixos.org/nix/install <span style="color:#eceff4">|</span> sh
</span></span></code></pre></div><p>It&rsquo;s generally not a good idea to curl and execute files from the internet (without verifying integrity), so you might want to download the install script first and take a look before executing it!</p>
<p>Open up a new shell in your terminal and running <code>nix</code> <em>should</em> work. If not, run <code>. ~/.nix-profile/etc/profile.d/nix.sh</code></p>
<p>Now, <a href="https://github.com/nix-community/home-manager#installation">install home-manager</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nix-channel --add https://github.com/nix-community/home-manager/archive/master.tar.gz home-manager
</span></span><span style="display:flex;"><span>nix-channel --update
</span></span><span style="display:flex;"><span>nix-shell <span style="color:#a3be8c">&#39;&lt;home-manager&gt;&#39;</span> -A install
</span></span></code></pre></div><p>You should see a wave of <code>/nix/store/*</code> paths being displayed on your screen.</p>
<p>Now, to start off with a basic configuration, open up <code>~/.config/nixpkgs/home.nix</code> in the editor of your choice and paste this in (you will want to change <code>userName</code> and <code>homeDirectory</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span><span style="color:#eceff4">{</span> config<span style="color:#81a1c1">,</span> pkgs<span style="color:#81a1c1">,</span> <span style="color:#81a1c1">...</span> <span style="color:#eceff4">}:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>  programs<span style="color:#81a1c1">.</span>home-manager<span style="color:#81a1c1">.</span>enable <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  home <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>    username <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;dave&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>    homeDirectory <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;/home/dave&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>    stateVersion <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;21.11&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>    packages <span style="color:#81a1c1">=</span> <span style="color:#81a1c1;font-weight:bold">with</span> pkgs<span style="color:#eceff4">;</span> <span style="color:#eceff4">[</span>
</span></span><span style="display:flex;"><span>      bind
</span></span><span style="display:flex;"><span>      exa
</span></span><span style="display:flex;"><span>      fd
</span></span><span style="display:flex;"><span>      ripgrep
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">];</span>
</span></span><span style="display:flex;"><span>  <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  programs <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    git <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>      enable <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>      aliases <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        aa <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;add -A .&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        br <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;branch&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        c <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;commit -S&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        ca <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;commit -S --amend&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        cb <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;checkout -b&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        co <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;checkout&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        d <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;diff&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        l <span style="color:#81a1c1">=</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a3be8c">&#34;log --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      delta <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        enable <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        options <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>          features <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;line-numbers decorations&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>          whitespace-error-style <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;22 reverse&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>          plus-style <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;green bold ul &#39;#198214&#39;&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>          decorations <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>            commit-decoration-style <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;bold yellow box ul&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>            file-style <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;bold yellow ul&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>            file-decoration-style <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;none&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>        <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      extraConfig <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        push <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span> default <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;current&#34;</span><span style="color:#eceff4">;</span> <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>        pull <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span> rebase <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span> <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    starship <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>      enable <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>      enableZshIntegration <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      settings <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        add_newline <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">false</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        scan_timeout <span style="color:#81a1c1">=</span> <span style="color:#b48ead">10</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    zsh <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>      enable <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>      enableAutosuggestions <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>      enableSyntaxHighlighting <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>      history<span style="color:#81a1c1">.</span>size <span style="color:#81a1c1">=</span> <span style="color:#b48ead">1000000</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      localVariables <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        CASE_SENSITIVE <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;true&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        DISABLE_UNTRACKED_FILES_DIRTY <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;true&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        RPROMPT <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;&#34;</span><span style="color:#eceff4">;</span> <span style="color:#616e87;font-style:italic"># override because macOS defaults to filepath</span>
</span></span><span style="display:flex;"><span>        ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;fg=#838383,underline&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        ZSH_DISABLE_COMPFIX <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;true&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      initExtra <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#a3be8c">        export PAGER=less
</span></span></span><span style="display:flex;"><span><span style="color:#a3be8c">      &#39;&#39;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      shellAliases <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a3be8c">&#34;..&#34;</span> <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;cd ..&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        grep <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;rg --smart-case&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        ls <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#34;exa -la --git&#34;</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#a3be8c">&#34;oh-my-zsh&#34;</span> <span style="color:#81a1c1">=</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        enable <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">true</span><span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>        plugins <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a3be8c">&#34;gitfast&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a3be8c">&#34;last-working-dir&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#eceff4">];</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span>
</span></span></code></pre></div><p>Save the file and run:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>home-manager switch
</span></span></code></pre></div><p>You should see another wave of <code>/nix/store/*</code> paths. The new configuration should now be active.</p>
<p>If you run <code>zsh</code>, you should see that you have <a href="https://starship.rs/">starship</a> and access to several other utils such as <code>rg</code>, <code>fd</code>, and <code>exa</code>.</p>
<p>This basic configuration above is also defining your <code>~/.config/git/config</code> and <code>.zshrc</code>. If you already have either of these files, home-manager will complain about them already existing.</p>
<p>If you run <code>cat ~/.zshrc</code>, you will see the way these configuration files are generated.</p>
<p>You can extend this configuration for programs such as (neo)vim, emacs, alacritty, ssh, etc. To see other programs, take a look at <a href="https://github.com/nix-community/home-manager/tree/master/modules/programs">home-manager/modules/programs</a>.</p>
<h2 id="gateway-to-nix">Gateway To Nix<a href="#gateway-to-nix" class="hanchor" ariaLabel="Anchor">#</a></h2>
<p>In ways, home-manager can be seen as a gateway to the nix ecosystem. If you have enjoyed the way you can declare user configuration with home-manager, you may be interested in expanding your configuration to include other system dependencies and configuration. For example, in Linux you can define your entire system&rsquo;s configuration (including the kernel, kernel modules, networking, filesystems, etc) in nix. For macOS, there is <a href="https://github.com/LnL7/nix-darwin">nix-darwin</a> that includes nix modules for configuring launchd, dock, and other preferences and services. You may also want to check out <a href="https://nixos.wiki/wiki/Flakes">Nix Flakes</a>: a more recent feature that allows you declare dependencies, and have them automatically pinned and hashed in <code>flake.lock</code>, similar to that of many modern package managers.</p>
<h2 id="wrapping-up">Wrapping up<a href="#wrapping-up" class="hanchor" ariaLabel="Anchor">#</a></h2>
<p>The title of this post is slightly misleading, since it&rsquo;s possible to retain some of your dotfiles and have them intermingle with home-manager by including them alongside nix. The idea of defining user configuration using nix can provide a clean way to maintain your configuration, and allow it to be portable across platforms. Is it worth the effort to migrate away from shell scripts and dotfiles? I&rsquo;d say so.</p></section>

<script
  type="text/javascript"
  src="https://storage.ko-fi.com/cdn/widget/Widget_2.js"
></script>
<script type="text/javascript">
  kofiwidget2.init("Buy me a coffee", "#a15bc2", "F1F2S4LWI");
  kofiwidget2.draw();
</script>


		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/nix">nix</a></li>
					
					<li><a href="/tags/dotfiles">dotfiles</a></li>
					
					<li><a href="/tags/home-manager">home-manager</a></li>
					
				</ul>
			</nav>
			
			
		</div>
	</article>
</main>

		<section id='comments' class='comments'>
  <div class='container sep-before'>
    <div class='comments'><script>
    
    var getTheme = window.localStorage && window.localStorage.getItem("theme-storage");
    getTheme = getTheme == null ? 'light' : getTheme;

    let theme = getTheme === 'dark' ? 'github-dark' : 'github-light';
    let s = document.createElement('script');
    s.src = 'https://utteranc.es/client.js';
    s.setAttribute('repo', 'davegallant\/davegallant.github.io');
    s.setAttribute('issue-term', 'pathname');
    s.setAttribute('theme', theme);
    s.setAttribute('crossorigin', 'anonymous');
    s.setAttribute('async', '');
    document.querySelector('div.comments').innerHTML = '';
    document.querySelector('div.comments').appendChild(s);
</script>
</div>
  </div>
</section><footer>
  <script src="https://storage.ko-fi.com/cdn/scripts/overlay-widget.js"></script>
  <div style="display: flex"><a class="soc" href="mailto:me@davegallant.ca" rel="me" title="Email"
      ><i data-feather="at-sign"></i
    ></a>
    <a class="border"></a><a class="soc" href="https://linktr.ee/davegallant" rel="me" title="LinkTree"
      ><i data-feather="compass"></i
    ></a>
    <a class="border"></a><a class="soc" href="https://github.com/davegallant" rel="me" title="GitHub"
      ><i data-feather="github"></i
    ></a>
    <a class="border"></a><a class="soc" href="https://mastodon.social/@davegallant" rel="me" title="Mastodon"
      ><i data-feather="speaker"></i
    ></a>
    <a class="border"></a><a class="soc" href="https://www.linkedin.com/in/dave-gallant/" rel="me" title="LinkedIn"
      ><i data-feather="linkedin"></i
    ></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2023  Dave Gallant 
  </div>
  
  <script src="/js/copy-code-button.js"></script>
  
</footer>
 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V8WJDERTX9"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-V8WJDERTX9', { 'anonymize_ip': false });
}
</script>

<script>
  feather.replace();
</script></div>
    </body>
</html>
